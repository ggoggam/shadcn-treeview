# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a **ShadCN custom component registry** built on Next.js 15 (App Router, React 19). The goal is to create a generic, reusable TreeView component distributed as a ShadCN registry item. The TreeView should support:
- Recursive collapsing/expanding
- Lazy loading of child nodes
- Drag-and-drop (including across different TreeView instances)
- Generic type signatures (no domain-specific assumptions like file icons)

## Commands

- **Dev server:** `bun run dev` (uses Turbopack)
- **Build:** `bun run build`
- **Lint:** `bun run lint`
- **Build registry:** `bun run registry:build` (runs `shadcn build`, outputs to `public/r/`)

## Architecture

### ShadCN Registry Pattern

This repo follows the [ShadCN registry template](https://ui.shadcn.com/docs/registry) pattern:

- **`registry.json`** — Defines all registry items (components, hooks, libs, pages) with their dependencies and file paths. This is the source of truth for what gets published.
- **`registry/new-york/`** — All registry source files live here, organized by type:
  - `ui/` — Primitive UI components (button, card, input, label, textarea)
  - `blocks/` — Composite components/pages, each in its own directory (can include sub-components, hooks, libs, CSS)
- **`public/r/`** — Built registry output (JSON files). Generated by `pnpm registry:build`. Do not edit manually.
- **`components.json`** — ShadCN configuration (new-york style, Tailwind v4, RSC enabled, lucide icons)

### Adding a New Registry Component

1. Create source files under `registry/new-york/blocks/<name>/` (or `registry/new-york/ui/` for primitives)
2. Add an entry to `registry.json` with name, type, dependencies, registryDependencies, and file paths
3. Run `pnpm registry:build` to generate the distributable JSON
4. Preview by importing the component in `app/page.tsx`

### Key Conventions

- **Package manager:** pnpm
- **Styling:** Tailwind CSS v4 with CSS variables (defined in `app/globals.css`), `tw-animate-css` for animations
- **Utility:** `cn()` from `lib/utils.ts` (clsx + tailwind-merge) for class merging
- **Path aliases:** `@/*` maps to project root (e.g., `@/lib/utils`, `@/registry/new-york/ui/button`)
- **TypeScript:** Strict mode enabled
- **Icons:** lucide-react
